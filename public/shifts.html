<!doctype html>
<head>
  <title>Shifts - Shiftable</title>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.2/mapbox.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.2/mapbox.css' rel='stylesheet' />

  <!-- // <script src="libs/scheduler/dhtmlxscheduler.js" type="text/javascript" charset="utf-8"></script> -->
  <script src="libs/moment/moment.js" type="text/javascript" charset="utf-8"></script>
  <!-- // <script type="text/javascript" src="javascript/app.js" charset="utf-8"></script> -->

  <!-- <link rel="stylesheet" href="libs/scheduler/dhtmlxscheduler.css" type="text/css" media="screen" title="no title" charset="utf-8"> -->
  
  <style type="text/css" media="screen">
    html, body {
      margin: 0px;
      padding: 0px;
      height: 100%;
      overflow: hidden;
    }

    #map { 
      position:relative; 
      top:10px; 
      bottom:10px; 
      left: 10px;
      right: 10px;
      height:60%;
      width:50%; 
      margin: 100px 10px 50px 700px;
    }

  </style>

  
</head>
<body>

<div id="container">
  <form id="local-reg" class="collapse" action="/api/shifts" method="post">
    <div>
        <label>First Name:</label>
        <input type="text" name="username"/>
    </div>
    <div>
        <label>Last Name:</label>
        <input type="text" name="username"/>
    </div>
    <div>
        <label>Password:</label>
        <input type="password" name="password"/>
    </div>
    <div>
        <label>Email:</label>
        <input type="text" name="email"/>
    </div>
    <div>
        <label>Company:</label>
        <input type="text" name="company"/>
    </div>
    <div>
        <label>Role:</label>
        <input type="text" name="role"/>
    </div>
    <div>
        <label>Address:</label>
        <input type="text" id="address" name="address"/>
    </div>
    <div>
        <label>City:</label>
        <input type="text" name="city"/>
    </div>
     <div>
        <label>Province:</label>
        <input type="text" name="province"/>
    </div>
    <div>
        <label>Postal Code:</label>
        <input type="text" name="postalCode"/>
    </div>
</div>
<div id='map'></div>

<script type="text/javascript">
//<![CDATA[
L.mapbox.accessToken = 'pk.eyJ1IjoidGVyZXNhdG8iLCJhIjoiVWVQcjhJSSJ9.7oafI4-yF63mwYefbm7VkQ';

var map = L.mapbox.map('map', 'examples.map-h67hf2ic', {
  doubleClickZoom: false
})
.setView([49.88, -97.15], 4)
.on('dblclick', function(e) {
  // Zoom exactly to each double-clicked point
  map.setView(e.latlng, map.getZoom() + 1);
});


// Credit Foursquare for their wonderful data
map.attributionControl
    .addAttribution('<a href="https://foursquare.com/">Places data from Foursquare</a>');


var CLIENT_ID = 'N5JGWBW3KJR0BVOS5LMQKCUT5X4REH5OO3HGFPTP0VF1P55V';
var CLIENT_SECRET = '234DMM2HV3ZACKCMUH1V5PODND052JR3I2ZTPUQKFDDLLFVB';
var NEAR = "las vegas, nv";
var QUERY = "sushi";

// https://developer.foursquare.com/start/search
var API_ENDPOINT = 'https://api.foursquare.com/v2/venues/search' +
  '?client_id=CLIENT_ID' +
  '&client_secret=CLIENT_SECRET' +
  '&v=20140806' +
  '&m=foursquare' +
  '&near=NEAR' +
  '&query=QUERY' +
  '&callback=?';

// Keep our place markers organized in a nice group.
var foursquarePlaces = L.layerGroup().addTo(map);

// Use jQuery to make an AJAX request to Foursquare to load markers data.
$.getJSON(API_ENDPOINT
    .replace('CLIENT_ID', CLIENT_ID)
    .replace('CLIENT_SECRET', CLIENT_SECRET)
    .replace('NEAR', NEAR)
    .replace('QUERY', QUERY), function(result, status) {

    if (status !== 'success') return alert('Request to Foursquare failed');

    // Transform each venue result into a marker on the map.
    for (var i = 0; i < result.response.venues.length; i++) {
      var venue = result.response.venues[i];
      var latlng = L.latLng(venue.location.lat, venue.location.lng);
      var marker = L.marker(latlng, {
          icon: L.mapbox.marker.icon({
            'marker-color': '#BE9A6B',
            'marker-symbol': 'marker',
            'marker-size': 'large'
          })
        })
      .bindPopup(
        '<strong><a href="https://foursquare.com/v/' + venue.id + '">' + venue.name + '</a></strong>' +
        '<br><a style="cursor:pointer;" onClick="document.getElementById("address").value="' + venue.location.address +'";">' + venue.location.address + '</a><br>' + venue.location.city +
         " " + venue.location.state )
        .addTo(foursquarePlaces);
    }

});

//]]>
</script>
</body>